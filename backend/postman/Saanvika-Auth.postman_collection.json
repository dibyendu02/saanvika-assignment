{
  "info": {
    "_postman_id": "saanvika-auth-collection",
    "name": "Saanvika Employee Management",
    "description": "Authentication and User Management API endpoints for the Employee Management System",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5001",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    },
    {
      "key": "super_admin_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "admin_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "internal_office1_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "internal_office2_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "external_office1_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "external_office2_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "office1_id",
      "value": "",
      "type": "string",
      "description": "Replace with actual office 1 ID from your database"
    },
    {
      "key": "office2_id",
      "value": "",
      "type": "string",
      "description": "Replace with actual office 2 ID from your database"
    },
    {
      "key": "external_employee_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "super_admin_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "internal_office1_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "external_office1_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "external_office2_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "attendance_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "distribution_id",
      "value": "",
      "type": "string"
    },
    {
      "key": "location_id",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/health",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "health"]
            },
            "description": "Check if the server is running and connected to the database"
          },
          "response": []
        },
        {
          "name": "Register Super Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('super_admin_token', response.data.token);",
                  "        pm.collectionVariables.set('token', response.data.token);",
                  "        pm.collectionVariables.set('super_admin_id', response.data.user._id);",
                  "        console.log('Super Admin token saved');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Super Admin\",\n    \"email\": \"superadmin@test.com\",\n    \"phone\": \"9876543210\",\n    \"password\": \"password123\",\n    \"role\": \"super_admin\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "register"]
            },
            "description": "Register a new super admin user. Super admins don't require primaryOfficeId."
          },
          "response": []
        },
        {
          "name": "Register Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('admin_token', response.data.token);",
                  "        console.log('Admin token saved');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Admin User\",\n    \"email\": \"admin@test.com\",\n    \"phone\": \"9876543211\",\n    \"password\": \"password123\",\n    \"role\": \"admin\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "register"]
            },
            "description": "Register a new admin user. Admins don't require primaryOfficeId. Status will be set to 'active' automatically."
          },
          "response": []
        },
        {
          "name": "Register Internal Employee - Office 1",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('internal_office1_token', response.data.token);",
                  "        pm.collectionVariables.set('internal_office1_id', response.data.user._id);",
                  "        console.log('Internal Office 1 token saved');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Internal Employee Office1\",\n    \"email\": \"internal1@test.com\",\n    \"phone\": \"9876543212\",\n    \"password\": \"password123\",\n    \"role\": \"internal\",\n    \"primaryOfficeId\": \"{{office1_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "register"]
            },
            "description": "Register internal employee for Office 1"
          },
          "response": []
        },
        {
          "name": "Register Internal Employee - Office 2",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('internal_office2_token', response.data.token);",
                  "        console.log('Internal Office 2 token saved');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Internal Employee Office2\",\n    \"email\": \"internal2@test.com\",\n    \"phone\": \"9876543222\",\n    \"password\": \"password123\",\n    \"role\": \"internal\",\n    \"primaryOfficeId\": \"{{office2_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "register"]
            },
            "description": "Register internal employee for Office 2"
          },
          "response": []
        },
        {
          "name": "Register External Employee - Office 1",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.user) {",
                  "        pm.collectionVariables.set('external_employee_id', response.data.user._id);",
                  "        pm.collectionVariables.set('external_office1_id', response.data.user._id);",
                  "        console.log('External Office 1 employee ID saved:', response.data.user._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"External Employee Office1\",\n    \"email\": \"external1@test.com\",\n    \"phone\": \"9876543213\",\n    \"password\": \"password123\",\n    \"role\": \"external\",\n    \"primaryOfficeId\": \"{{office1_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "register"]
            },
            "description": "Register external employee for Office 1 (status: pending)"
          },
          "response": []
        },
        {
          "name": "Register External Employee - Office 2",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.user) {",
                  "        pm.collectionVariables.set('external_office2_id', response.data.user._id);",
                  "        console.log('External Office 2 employee ID saved:', response.data.user._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"External Employee Office2\",\n    \"email\": \"external2@test.com\",\n    \"phone\": \"9876543223\",\n    \"password\": \"password123\",\n    \"role\": \"external\",\n    \"primaryOfficeId\": \"{{office2_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "register"]
            },
            "description": "Register external employee for Office 2 (status: pending)"
          },
          "response": []
        },
        {
          "name": "Login - Super Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('super_admin_token', response.data.token);",
                  "        pm.collectionVariables.set('token', response.data.token);",
                  "        console.log('Super Admin token saved');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"superadmin@test.com\",\n    \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "login"]
            },
            "description": "Login as super admin"
          },
          "response": []
        },
        {
          "name": "Login - Internal Office 1",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('internal_office1_token', response.data.token);",
                  "        console.log('Internal Office 1 token saved');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"internal1@test.com\",\n    \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "login"]
            },
            "description": "Login as internal employee from Office 1"
          },
          "response": []
        },
        {
          "name": "Verify External Employee - Office 1",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/auth/verify/{{external_office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "verify", "{{external_office1_id}}"]
            },
            "description": "Verify external employee from Office 1"
          },
          "response": []
        },
        {
          "name": "Verify External Employee - Office 2",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/auth/verify/{{external_office2_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "verify", "{{external_office2_id}}"]
            },
            "description": "Verify external employee from Office 2"
          },
          "response": []
        },
        {
          "name": "Login - External Office 1 (After Verification)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('external_office1_token', response.data.token);",
                  "        console.log('External Office 1 token saved');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"external1@test.com\",\n    \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "login"]
            },
            "description": "Login as external employee from Office 1 (after verification)"
          },
          "response": []
        },
        {
          "name": "Login - External Office 2 (After Verification)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('external_office2_token', response.data.token);",
                  "        console.log('External Office 2 token saved');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"external2@test.com\",\n    \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "login"]
            },
            "description": "Login as external employee from Office 2 (after verification)"
          },
          "response": []
        },
        {
          "name": "Create External Employee - By Admin (Auto-Active)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.user) {",
                  "        pm.collectionVariables.set('admin_created_external_id', response.data.user._id);",
                  "        console.log('Admin-created external employee ID saved');",
                  "        // Verify status is active",
                  "        pm.test('Status should be active', function() {",
                  "            pm.expect(response.data.user.status).to.eql('active');",
                  "        });",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Admin Created External\",\n    \"email\": \"admin.created.external@test.com\",\n    \"phone\": \"9876543299\",\n    \"password\": \"password123\",\n    \"role\": \"external\",\n    \"primaryOfficeId\": \"{{office1_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/employees",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "employees"]
            },
            "description": "Admin creates external employee - should be auto-activated (status: active, no verification needed). Expected: 201 with active status."
          },
          "response": []
        },
        {
          "name": "Login - Admin Created External (No Verification)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"admin.created.external@test.com\",\n    \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "login"]
            },
            "description": "Login as admin-created external employee - should work immediately without verification. Expected: 200 with token."
          },
          "response": []
        },
        {
          "name": "Create External Employee - By Internal (Auto-Active)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Internal Created External\",\n    \"email\": \"internal.created.external@test.com\",\n    \"phone\": \"9876543298\",\n    \"password\": \"password123\",\n    \"role\": \"external\",\n    \"primaryOfficeId\": \"{{office1_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/employees",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "employees"]
            },
            "description": "Internal employee creates external employee - should be auto-activated. Expected: 201 with active status."
          },
          "response": []
        },
        {
          "name": "Create Employee - External [SHOULD FAIL]",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Unauthorized Employee\",\n    \"email\": \"unauthorized@test.com\",\n    \"phone\": \"9876543297\",\n    \"password\": \"password123\",\n    \"role\": \"external\",\n    \"primaryOfficeId\": \"{{office1_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/employees",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "employees"]
            },
            "description": "External employees cannot create other employees. Expected: 403 Forbidden."
          },
          "response": []
        }
      ]
    },
    {
      "name": "User Management",
      "item": [
        {
          "name": "Get My Profile (All Roles)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/profile",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "profile"]
            },
            "description": "Any authenticated user can get their own profile. Test with different tokens."
          },
          "response": []
        },
        {
          "name": "Get All Users - Super Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users"]
            },
            "description": "Super Admin can see ALL users. Expected: 200 with all users."
          },
          "response": []
        },
        {
          "name": "Get All Users - Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users"]
            },
            "description": "Admin can see ALL users. Expected: 200 with all users."
          },
          "response": []
        },
        {
          "name": "Get External Employees - Internal (Same Office)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users?role=external",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users"],
              "query": [
                {
                  "key": "role",
                  "value": "external"
                }
              ]
            },
            "description": "Internal employee can see external employees from their own office only. Expected: 200 with Office 1 external employees only."
          },
          "response": []
        },
        {
          "name": "Get Internal Employees - Internal (Same Office)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users?role=internal",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users"],
              "query": [
                {
                  "key": "role",
                  "value": "internal"
                }
              ]
            },
            "description": "Internal employee can see internal employees from their own office only. Expected: 200 with Office 1 internal employees only."
          },
          "response": []
        },
        {
          "name": "Get Admin Users - Internal [SHOULD FAIL]",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users?role=admin",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users"],
              "query": [
                {
                  "key": "role",
                  "value": "admin"
                }
              ]
            },
            "description": "Internal employees cannot view admin users. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Get All Users - External [SHOULD FAIL]",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users"]
            },
            "description": "External employees cannot list users. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Get User By ID - Super Admin (Any User)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{external_office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "{{external_office1_id}}"]
            },
            "description": "Super Admin can view any user. Expected: 200 with user data."
          },
          "response": []
        },
        {
          "name": "Get User By ID - Internal (Same Office User)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{external_office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "{{external_office1_id}}"]
            },
            "description": "Internal employee can view users from same office. Expected: 200 with user data."
          },
          "response": []
        },
        {
          "name": "Get User By ID - Internal (Different Office) [SHOULD FAIL]",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{external_office2_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "{{external_office2_id}}"]
            },
            "description": "Internal employee cannot view users from different office. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Get User By ID - External (Own Data)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{external_office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "{{external_office1_id}}"]
            },
            "description": "External employee can view their own data. Expected: 200 with own user data."
          },
          "response": []
        },
        {
          "name": "Get User By ID - External (Other User) [SHOULD FAIL]",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/{{external_office2_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "{{external_office2_id}}"]
            },
            "description": "External employee cannot view other users. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Get Employees By Office - Super Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/office/{{office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "office", "{{office1_id}}"]
            },
            "description": "Super Admin can view employees from any office. Expected: 200 with Office 1 employees."
          },
          "response": []
        },
        {
          "name": "Get Employees By Office - Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/office/{{office2_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "office", "{{office2_id}}"]
            },
            "description": "Admin can view employees from any office. Expected: 200 with Office 2 employees."
          },
          "response": []
        },
        {
          "name": "Get Employees By Office - Internal (Own Office)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/office/{{office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "office", "{{office1_id}}"]
            },
            "description": "Internal employee can view employees from their own office. Expected: 200 with Office 1 employees."
          },
          "response": []
        },
        {
          "name": "Get Employees By Office - Internal (Different Office) [SHOULD FAIL]",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/office/{{office2_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "office", "{{office2_id}}"]
            },
            "description": "Internal employee cannot view employees from different office. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Get Employees By Office - External [SHOULD FAIL]",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/office/{{office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "office", "{{office1_id}}"]
            },
            "description": "External employees cannot view office employees list. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Get Users with Pagination",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users?page=1&limit=5",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "5"
                }
              ]
            },
            "description": "Test pagination. Expected: 200 with paginated results."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Office Management",
      "item": [
        {
          "name": "Create Office 1 - Super Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.office) {",
                  "        pm.collectionVariables.set('office1_id', response.data.office._id);",
                  "        console.log('Office 1 ID saved:', response.data.office._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Main Office\",\n    \"address\": \"123 Main Street, City Center, State 12345\",\n    \"location\": {\n        \"type\": \"Point\",\n        \"coordinates\": [77.5946, 12.9716]\n    }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/offices",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices"]
            },
            "description": "Create Office 1 (Main Office). Only admin/super_admin can create offices."
          },
          "response": []
        },
        {
          "name": "Create Office 2 - Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.office) {",
                  "        pm.collectionVariables.set('office2_id', response.data.office._id);",
                  "        console.log('Office 2 ID saved:', response.data.office._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Branch Office\",\n    \"address\": \"456 Branch Road, Suburb Area, State 54321\",\n    \"location\": {\n        \"type\": \"Point\",\n        \"coordinates\": [77.6088, 12.9352]\n    }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/offices",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices"]
            },
            "description": "Create Office 2 (Branch Office). Admin can also create offices."
          },
          "response": []
        },
        {
          "name": "Create Office - Internal [SHOULD FAIL]",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Unauthorized Office\",\n    \"address\": \"789 Fake Street\",\n    \"location\": {\n        \"type\": \"Point\",\n        \"coordinates\": [77.5, 12.9]\n    }\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/offices",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices"]
            },
            "description": "Internal employees cannot create offices. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Get All Offices - Super Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/offices",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices"]
            },
            "description": "Super Admin can see all offices. Expected: 200 with all offices."
          },
          "response": []
        },
        {
          "name": "Get All Offices - Internal (Own Office Only)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/offices",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices"]
            },
            "description": "Internal employee can only see their own office. Expected: 200 with Office 1 only."
          },
          "response": []
        },
        {
          "name": "Get All Offices - External [SHOULD FAIL]",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/offices",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices"]
            },
            "description": "External employees have no access to offices. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Get Office By ID - Super Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/offices/{{office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices", "{{office1_id}}"]
            },
            "description": "Super Admin can view any office. Expected: 200 with office details."
          },
          "response": []
        },
        {
          "name": "Get Office By ID - Internal (Own Office)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/offices/{{office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices", "{{office1_id}}"]
            },
            "description": "Internal employee can view their own office. Expected: 200."
          },
          "response": []
        },
        {
          "name": "Get Office By ID - Internal (Different Office) [SHOULD FAIL]",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/offices/{{office2_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices", "{{office2_id}}"]
            },
            "description": "Internal employee cannot view different office. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Get Office By ID - External [SHOULD FAIL]",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/offices/{{office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices", "{{office1_id}}"]
            },
            "description": "External employees have no access to offices, even their own. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Update Office - Admin",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Main Office - Updated\",\n    \"address\": \"123 Main Street, City Center, State 12345 (Updated)\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/offices/{{office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices", "{{office1_id}}"]
            },
            "description": "Admin can update offices. Expected: 200 with updated office."
          },
          "response": []
        },
        {
          "name": "Update Office - Internal [SHOULD FAIL]",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"Hacked Office Name\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/offices/{{office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices", "{{office1_id}}"]
            },
            "description": "Internal employees cannot update offices. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Add Target to Office - Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"type\": \"monthly\",\n    \"count\": 100,\n    \"period\": \"2024-01\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/offices/{{office1_id}}/targets",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices", "{{office1_id}}", "targets"]
            },
            "description": "Add distribution target to office. Expected: 201 with updated office."
          },
          "response": []
        },
        {
          "name": "Update Target - Admin",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"type\": \"monthly\",\n    \"period\": \"2024-01\",\n    \"count\": 150\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/offices/{{office1_id}}/targets",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices", "{{office1_id}}", "targets"]
            },
            "description": "Update existing target. Expected: 200 with updated office."
          },
          "response": []
        },
        {
          "name": "Find Nearby Offices",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/offices/nearby?longitude=77.5946&latitude=12.9716&maxDistance=10000",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices", "nearby"],
              "query": [
                {
                  "key": "longitude",
                  "value": "77.5946"
                },
                {
                  "key": "latitude",
                  "value": "12.9716"
                },
                {
                  "key": "maxDistance",
                  "value": "10000"
                }
              ]
            },
            "description": "Find offices within 10km of given coordinates. Expected: 200 with nearby offices."
          },
          "response": []
        },
        {
          "name": "Search Offices by Name",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/offices?search=Main",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices"],
              "query": [
                {
                  "key": "search",
                  "value": "Main"
                }
              ]
            },
            "description": "Search offices by name. Expected: 200 with matching offices."
          },
          "response": []
        },
        {
          "name": "Delete Office - Admin [SHOULD FAIL]",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/offices/{{office2_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices", "{{office2_id}}"]
            },
            "description": "Only super_admin can delete offices. Admin should get 403."
          },
          "response": []
        },
        {
          "name": "Delete Office - Super Admin",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/offices/{{office2_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "offices", "{{office2_id}}"]
            },
            "description": "Super Admin can delete offices. Expected: 200. WARNING: This will delete Office 2!"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Attendance Management",
      "item": [
        {
          "name": "Mark Attendance - Internal (At Office)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.attendance) {",
                  "        pm.collectionVariables.set('attendance_id', response.data.attendance._id);",
                  "        console.log('Attendance ID saved:', response.data.attendance._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"longitude\": 77.5946,\n    \"latitude\": 12.9716\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/attendance/mark",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance", "mark"]
            },
            "description": "Internal employee marks attendance at office location (within 200m). Expected: 201 with attendance record."
          },
          "response": []
        },
        {
          "name": "Mark Attendance - Internal (Duplicate) [SHOULD FAIL]",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"longitude\": 77.5946,\n    \"latitude\": 12.9716\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/attendance/mark",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance", "mark"]
            },
            "description": "Attempting to mark attendance twice on the same day. Expected: 400 - Attendance already marked for today."
          },
          "response": []
        },
        {
          "name": "Mark Attendance - External (At Office)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"longitude\": 77.5946,\n    \"latitude\": 12.9716\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/attendance/mark",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance", "mark"]
            },
            "description": "External employee marks attendance at office location. Expected: 201 with attendance record."
          },
          "response": []
        },
        {
          "name": "Mark Attendance - Too Far From Office [SHOULD FAIL]",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office2_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"longitude\": 77.0000,\n    \"latitude\": 12.0000\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/attendance/mark",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance", "mark"]
            },
            "description": "Employee trying to mark attendance from location far from office. Expected: 400 - Must be within 200 meters."
          },
          "response": []
        },
        {
          "name": "Mark Attendance - Super Admin [SHOULD FAIL]",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"longitude\": 77.5946,\n    \"latitude\": 12.9716\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/attendance/mark",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance", "mark"]
            },
            "description": "Super Admin cannot mark attendance - only employees can. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Mark Attendance - Admin [SHOULD FAIL]",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"longitude\": 77.5946,\n    \"latitude\": 12.9716\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/attendance/mark",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance", "mark"]
            },
            "description": "Admin cannot mark attendance - only employees can. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Get All Attendance - Super Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/attendance",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance"]
            },
            "description": "Super Admin can see all attendance records. Expected: 200 with all records."
          },
          "response": []
        },
        {
          "name": "Get All Attendance - Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/attendance",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance"]
            },
            "description": "Admin can see all attendance records. Expected: 200 with all records."
          },
          "response": []
        },
        {
          "name": "Get Attendance - Admin (Filter by Office)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/attendance?officeId={{office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance"],
              "query": [
                {
                  "key": "officeId",
                  "value": "{{office1_id}}"
                }
              ]
            },
            "description": "Admin filters attendance by office. Expected: 200 with Office 1 attendance only."
          },
          "response": []
        },
        {
          "name": "Get Attendance - Admin (Filter by User)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/attendance?userId={{internal_office1_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance"],
              "query": [
                {
                  "key": "userId",
                  "value": "{{internal_office1_id}}"
                }
              ]
            },
            "description": "Admin filters attendance by user. Expected: 200 with specific user's attendance."
          },
          "response": []
        },
        {
          "name": "Get Attendance - Admin (Filter by Date Range)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/attendance?startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2024-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31"
                }
              ]
            },
            "description": "Admin filters attendance by date range. Expected: 200 with records in date range."
          },
          "response": []
        },
        {
          "name": "Get Attendance - Internal (Own Office Only)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/attendance",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance"]
            },
            "description": "Internal employee can see attendance from their own office only. Expected: 200 with Office 1 attendance."
          },
          "response": []
        },
        {
          "name": "Get Attendance - External (Own Only)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/attendance",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance"]
            },
            "description": "External employee can only see their own attendance. Expected: 200 with own attendance only."
          },
          "response": []
        },
        {
          "name": "Get Attendance By ID - Super Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/attendance/{{attendance_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance", "{{attendance_id}}"]
            },
            "description": "Super Admin can view any attendance record. Expected: 200 with attendance details."
          },
          "response": []
        },
        {
          "name": "Get Attendance By ID - Internal (Own Office)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/attendance/{{attendance_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance", "{{attendance_id}}"]
            },
            "description": "Internal employee can view attendance from own office. Expected: 200."
          },
          "response": []
        },
        {
          "name": "Get Attendance with Pagination",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/attendance?page=1&limit=5",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "attendance"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "5"
                }
              ]
            },
            "description": "Test pagination. Expected: 200 with paginated results."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Goodies Distribution",
      "item": [
        {
          "name": "Create Distribution - Admin",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.distribution) {",
                  "        pm.collectionVariables.set('distribution_id', response.data.distribution._id);",
                  "        console.log('Distribution ID saved:', response.data.distribution._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"officeId\": \"{{office1_id}}\",\n    \"goodiesType\": \"T-Shirt\",\n    \"distributionDate\": \"2024-01-15\",\n    \"totalQuantity\": 100\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/distributions",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "distributions"]
            },
            "description": "Admin creates a goodies distribution. Expected: 201 with distribution record."
          },
          "response": []
        },
        {
          "name": "Create Distribution - Super Admin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"officeId\": \"{{office1_id}}\",\n    \"goodiesType\": \"Water Bottle\",\n    \"distributionDate\": \"2024-01-15\",\n    \"totalQuantity\": 50\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/distributions",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "distributions"]
            },
            "description": "Super Admin creates a goodies distribution. Expected: 201."
          },
          "response": []
        },
        {
          "name": "Create Distribution - Duplicate [SHOULD FAIL]",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"officeId\": \"{{office1_id}}\",\n    \"goodiesType\": \"T-Shirt\",\n    \"distributionDate\": \"2024-01-15\",\n    \"totalQuantity\": 50\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/distributions",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "distributions"]
            },
            "description": "Duplicate distribution (same office, date, goodies type). Expected: 400."
          },
          "response": []
        },
        {
          "name": "Create Distribution - Internal [SHOULD FAIL]",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"officeId\": \"{{office1_id}}\",\n    \"goodiesType\": \"Cap\",\n    \"distributionDate\": \"2024-01-16\",\n    \"totalQuantity\": 30\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/distributions",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "distributions"]
            },
            "description": "Internal employees cannot create distributions. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Create Distribution - External [SHOULD FAIL]",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"officeId\": \"{{office1_id}}\",\n    \"goodiesType\": \"Cap\",\n    \"distributionDate\": \"2024-01-16\",\n    \"totalQuantity\": 30\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/distributions",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "distributions"]
            },
            "description": "External employees cannot create distributions. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Get All Distributions - Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/distributions",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "distributions"]
            },
            "description": "Admin can see all distributions. Expected: 200 with all distributions."
          },
          "response": []
        },
        {
          "name": "Get Distributions - Internal (Own Office)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/distributions",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "distributions"]
            },
            "description": "Internal employee sees distributions from their office only. Expected: 200."
          },
          "response": []
        },
        {
          "name": "Get Distributions - External (Own Office)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/distributions",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "distributions"]
            },
            "description": "External employee sees distributions from their office only. Expected: 200."
          },
          "response": []
        },
        {
          "name": "Get Distribution By ID - Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/distributions/{{distribution_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "distributions", "{{distribution_id}}"]
            },
            "description": "Admin can view any distribution. Expected: 200."
          },
          "response": []
        },
        {
          "name": "Receive Goodies - Internal",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.receipt) {",
                  "        pm.collectionVariables.set('receipt_id', response.data.receipt._id);",
                  "        console.log('Receipt ID saved:', response.data.receipt._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"distributionId\": \"{{distribution_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/receive",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "receive"]
            },
            "description": "Internal employee receives goodies. Expected: 201 with receipt."
          },
          "response": []
        },
        {
          "name": "Receive Goodies - Internal (Duplicate) [SHOULD FAIL]",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"distributionId\": \"{{distribution_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/receive",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "receive"]
            },
            "description": "Cannot receive same goodies twice. Expected: 400 - Already received."
          },
          "response": []
        },
        {
          "name": "Receive Goodies - External",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"distributionId\": \"{{distribution_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/receive",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "receive"]
            },
            "description": "External employee receives goodies. Expected: 201 with receipt."
          },
          "response": []
        },
        {
          "name": "Receive Goodies - Admin [SHOULD FAIL]",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"distributionId\": \"{{distribution_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/receive",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "receive"]
            },
            "description": "Admin cannot receive goodies - only employees can. Expected: 403 Forbidden."
          },
          "response": []
        },
        {
          "name": "Get All Received - Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/received",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "received"]
            },
            "description": "Admin can see all received records. Expected: 200."
          },
          "response": []
        },
        {
          "name": "Get Received - Internal (Own Office)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/received",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "received"]
            },
            "description": "Internal sees received records from their office. Expected: 200."
          },
          "response": []
        },
        {
          "name": "Get Received - External (Own Only)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/received",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "received"]
            },
            "description": "External sees only their own received records. Expected: 200."
          },
          "response": []
        },
        {
          "name": "Get Received By ID - Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/goodies/received/{{receipt_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "goodies", "received", "{{receipt_id}}"]
            },
            "description": "Admin can view any receipt record. Expected: 200."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Location Sharing",
      "item": [
        {
          "name": "Share Location - Internal",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.location) {",
                  "        pm.collectionVariables.set('location_id', response.data.location._id);",
                  "        console.log('Location ID saved');",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"longitude\": 77.5946,\n    \"latitude\": 12.9716,\n    \"reason\": \"Client site visit\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/location/share",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location", "share"]
            },
            "description": "Share location as internal employee (no office radius check)"
          },
          "response": []
        },
        {
          "name": "Share Location - External (Any Location)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"longitude\": 78.4867,\n    \"latitude\": 17.3850,\n    \"reason\": \"Field work - remote location\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/location/share",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location", "share"]
            },
            "description": "Share location as external employee from any location (no office radius enforcement)"
          },
          "response": []
        },
        {
          "name": "Share Location - Admin [SHOULD FAIL]",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"longitude\": 77.5946,\n    \"latitude\": 12.9716\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/location/share",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location", "share"]
            },
            "description": "Admin cannot share location. Expected: 403"
          },
          "response": []
        },
        {
          "name": "Share Location - Without Reason",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"longitude\": 77.5946,\n    \"latitude\": 12.9716\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/location/share",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location", "share"]
            },
            "description": "Share location without reason (optional field)"
          },
          "response": []
        },
        {
          "name": "Get All Locations - Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/location",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location"]
            },
            "description": "Admin can view all location records"
          },
          "response": []
        },
        {
          "name": "Get Locations - Internal (Own Office)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{internal_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/location",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location"]
            },
            "description": "Internal can view locations from their office only"
          },
          "response": []
        },
        {
          "name": "Get Locations - External (Own Only)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{external_office1_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/location",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location"]
            },
            "description": "External can view their own location history only"
          },
          "response": []
        },
        {
          "name": "Get Location By ID - Admin",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/location/{{location_id}}",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location", "{{location_id}}"]
            },
            "description": "Admin can view any location record by ID"
          },
          "response": []
        },
        {
          "name": "Get Locations with Date Filter",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/location?startDate=2024-01-01&endDate=2025-12-31",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2024-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2025-12-31"
                }
              ]
            },
            "description": "Filter locations by date range"
          },
          "response": []
        },
        {
          "name": "Get Locations with Pagination",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/location?page=1&limit=5",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "location"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "5"
                }
              ]
            },
            "description": "Get locations with pagination"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Error Cases",
      "item": [
        {
          "name": "Register - Validation Error",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"\",\n    \"email\": \"invalid-email\",\n    \"phone\": \"123\",\n    \"password\": \"12345\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/register",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "register"]
            },
            "description": "Test validation errors. Expected: 400 with validation messages."
          },
          "response": []
        },
        {
          "name": "Login - Invalid Credentials",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"superadmin@test.com\",\n    \"password\": \"wrongpassword\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/v1/auth/login",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "auth", "login"]
            },
            "description": "Test invalid credentials. Expected: 401."
          },
          "response": []
        },
        {
          "name": "Protected Route - No Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/v1/users/profile",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "profile"]
            },
            "description": "Test accessing protected route without token. Expected: 401."
          },
          "response": []
        },
        {
          "name": "Get User - Not Found",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{super_admin_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/v1/users/000000000000000000000000",
              "host": ["{{base_url}}"],
              "path": ["api", "v1", "users", "000000000000000000000000"]
            },
            "description": "Test user not found. Expected: 404."
          },
          "response": []
        }
      ]
    }
  ]
}
